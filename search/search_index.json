{"config":{"lang":["ru"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Main","text":"<p>\u0414\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u044f \u0434\u043b\u044f \u043b\u0430\u0431\u043e\u0440\u0430\u0442\u043e\u0440\u043d\u044b\u0445 \u0440\u0430\u0431\u043e\u0442 \u043f\u043e \u0434\u0438\u0441\u0446\u0438\u043f\u043b\u0438\u043d\u0435 Web-\u043f\u0440\u043e\u0433\u0440\u0430\u043c\u043c\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0441\u0442\u0443\u0434\u0435\u043d\u0442\u043a\u0438 \u0433\u0440\u0443\u043f\u043f\u044b K33422 \u0414\u0435\u043c\u0448\u0438 \u0415\u0432\u0433\u0435\u043d\u0438\u0438</p>"},{"location":"lab2/forms/","title":"\u0424\u043e\u0440\u043c\u044b","text":"<p>\u041f\u0435\u0440\u0435\u0434 \u0442\u0435\u043c \u043a\u0430\u043a \u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f, \u043d\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u0435\u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0444\u043e\u0440\u043c\u044b. \u0414\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u0444\u0430\u0439\u043b <code>forms.py</code> \u0432 \u043d\u0430\u0448\u0435\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438.</p> \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u041e\u0442\u0437\u044b\u0432 <pre><code>from django import forms\nfrom django.contrib.auth.forms import UserCreationForm\nfrom django.contrib.auth.models import User\n# Create your forms here.\nclass NewUserForm(UserCreationForm):\nemail = forms.EmailField(required=True)\nclass Meta:\nmodel = User\nfields = (\"username\", \"email\", \"password1\", \"password2\")\ndef save(self, commit=True):\nuser = super(NewUserForm, self).save(commit=False)\nif commit:\nuser.save()\nreturn user\n</code></pre> <p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043a\u043b\u0430\u0441\u0441, \u043d\u0430\u0441\u043b\u0435\u0434\u0443\u044f \u0432\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u0443\u044e \u0444\u043e\u0440\u043c\u0443 \u0434\u043b\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u043d\u043e\u0432\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 <code>UserCreationForm</code>. \u0414\u043e\u0431\u0430\u0432\u0438\u043c \u043f\u043e\u043b\u0435 \u043f\u043e\u0447\u0442\u044b.</p> <pre><code>from django import forms\nfrom .models import Booking\nclass BookRoomForm(forms.ModelForm):\nclass Meta:\nmodel = Booking\nfields = (\"date_start\", \"date_end\")\ndef __init__(self, *args, **kwargs):\nself.user = kwargs.pop('user', None)\nself.room = kwargs.pop('room', None)\nsuper(BookRoomForm, self).__init__(*args, **kwargs)\ndate_start = forms.DateField(widget=forms.TextInput(attrs={'type': 'date'}))\ndate_end = forms.DateField(widget=forms.TextInput(attrs={'type': 'date'}))\ndef save(self, commit=True):\nbooking = super(BookRoomForm, self).save(commit=False)\nbooking.user = self.user\nbooking.room = self.room\nif commit:\nbooking.save()\nreturn booking\n</code></pre> <p>\u0424\u043e\u0440\u043c\u0430 \u0434\u043b\u044f \u0431\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f. \u0412\u043c\u0435\u0441\u0442\u0435 \u0441 \u0440\u0435\u043a\u0432\u0435\u0441\u0442\u043e\u043c \u0432 \u043d\u0435\u0435 \u043f\u0435\u0440\u0435\u0434\u0430\u0435\u0442\u0441\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0442\u0435\u043a\u0443\u0449\u0435\u043c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435 \u0438 \u043e \u043a\u043e\u043c\u043d\u0430\u0442\u0435,  \u043a\u043e\u0442\u043e\u0440\u0443\u044e \u043e\u043d \u0431\u0440\u043e\u043d\u0438\u0440\u0443\u0435\u0442. \u042e\u0437\u0435\u0440\u0443 \u043d\u0443\u0436\u043d\u043e \u0442\u043e\u043b\u044c\u043a\u043e \u0432\u0432\u0435\u0441\u0442\u0438 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0434\u0430\u0442\u0435 \u0437\u0430\u0441\u0435\u043b\u0435\u043d\u0438\u044f \u0438 \u0432\u044b\u0441\u0435\u043b\u0435\u043d\u0438\u044f.</p> <pre><code>from django import forms\nfrom .models import Comment\nclass ReviewForm(forms.ModelForm):\nclass Meta:\nmodel = Comment\nfields = (\"rating\", \"content\")\ndef __init__(self, *args, **kwargs):\nself.user = kwargs.pop('user', None)\nself.room = kwargs.pop('room', None)\nsuper(ReviewForm, self).__init__(*args, **kwargs)\ndef save(self, commit=True):\ncomment = super(ReviewForm, self).save(commit=False)\ncomment.user = self.user\ncomment.room = self.room\ncomment.date = datetime.date.today()\nif commit:\ncomment.save()\nreturn comment\n</code></pre> <p>\u0421\u0430\u043c\u0430\u044f \u0431\u0430\u0437\u043e\u0432\u0430\u044f \u0444\u043e\u0440\u043c\u0430, \u043e\u0441\u043d\u043e\u0432\u0430\u043d\u043d\u0430\u044f \u043d\u0430 \u043c\u043e\u0434\u0435\u043b\u0438. \u041d\u0430\u043c \u0442\u0440\u0435\u0431\u0443\u044e\u0442\u0441\u044f \u0442\u043e\u043b\u044c\u043a\u043e 2 \u043f\u043e\u043b\u044f: \u0442\u0435\u043a\u0441\u0442 \u043e\u0442\u0437\u044b\u0432\u0430 \u0438 \u0440\u0435\u0439\u0442\u0438\u043d\u0433.</p>"},{"location":"lab2/models/","title":"\u041c\u043e\u0434\u0435\u043b\u0438","text":"<p>\u041d\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u043f\u0438\u0441\u0430\u0442\u044c \u0411\u0414 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Django ORM, \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u0435\u0440\u0435\u0439\u0434\u0451\u043c \u0432 \u0444\u0430\u0439\u043b <code>models.py</code> \u0432 \u043d\u0430\u0448\u0435\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u0438  \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u0430\u0441\u0441\u043e\u0432, \u043d\u0430\u0441\u043b\u0435\u0434\u0443\u0435\u043c\u044b\u0445 \u043e\u0442 <code>django.db.models.Model</code>.</p> \u041e\u0442\u0435\u043b\u044c\u041a\u043e\u043c\u043d\u0430\u0442\u0430\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u041e\u0442\u0437\u044b\u0432 <pre><code>from django.db import models\nclass Hotel(models.Model):\nname = models.CharField(max_length=50)\nowner = models.CharField(max_length=50, null=True, blank=True)\ncountry = models.CharField(max_length=30)\ncity = models.CharField(max_length=30)\naddress = models.CharField(max_length=100)\ndescription = models.CharField(max_length=1000, null=True, blank=True)\nimage = models.ImageField()\ndef __str__(self):\nreturn f'{self.city}'\n</code></pre> <pre><code>from django.db import models\nclass Room(models.Model):\nTYPE_ROOM = (\n(\"PREMIUM\", \"premium\"),\n(\"DELUXE\", \"deluxe\"),\n(\"SUITE\", \"suite\"),\n)\nhotel = models.ForeignKey(Hotel, on_delete=models.CASCADE)\ndescription = models.CharField(max_length=1000)\ntype = models.CharField(max_length=10, choices=TYPE_ROOM)\ncost = models.IntegerField()\nimage = models.ImageField()\nguest = models.ManyToManyField(User, through='Booking')\ndef __str__(self):\nreturn self.type\n</code></pre> <pre><code>from django.contrib.auth.models import User\nfrom django.db import models\nclass Booking(models.Model):\nuser = models.ForeignKey(User, on_delete=models.CASCADE)\nroom = models.ForeignKey(Room, on_delete=models.CASCADE)\ndate_start = models.DateField()\ndate_end = models.DateField()\n</code></pre> <pre><code>from django.contrib.auth.models import User\nfrom django.db import models\nclass Comment(models.Model):\nuser = models.ForeignKey(User, on_delete=models.CASCADE)\nroom = models.ForeignKey(Room, on_delete=models.CASCADE)\ncontent = models.CharField(max_length=1000, null=True, blank=True)\nrating = models.IntegerField()\ndate = models.DateField()\ndef __str__(self):\nreturn f'{self.user} \u043en {self.room}'\n</code></pre> <p>\u041f\u043e\u0441\u043b\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0432\u0441\u0435\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0438:</p> <pre><code>python manage.py makemigrations\npython manage.py migrate\n</code></pre> <p>\u0410 \u0442\u0430\u043a \u0436\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0443\u043f\u0435\u0440\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:</p> <pre><code>python manage.py createsuperuser\n</code></pre>"},{"location":"lab2/views/","title":"\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f","text":"<p>\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u2014 \u043e\u0441\u043d\u043e\u0432\u043d\u0430\u044f \u043b\u043e\u0433\u0438\u043a\u0430 \u043d\u0430\u0448\u0435\u0433\u043e \u0441\u0430\u0439\u0442\u0430. \u0412 \u0444\u0430\u0439\u043b\u0435 <code>views.py</code> \u043f\u0440\u043e\u043f\u0438\u0448\u0435\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0444\u0443\u043d\u043a\u0446\u0438\u0438.</p> \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f, \u0432\u0445\u043e\u0434 \u0438 \u0432\u044b\u0445\u043e\u0434\u0421\u043f\u0438\u0441\u043a\u043e\u0432\u044b\u0435 \u0438 \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043e\u0442\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f\u0411\u0440\u043e\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435\u041e\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u043e\u0442\u0437\u044b\u0432\u0430 <pre><code>from django.shortcuts import render, redirect\nfrom django.contrib import messages\nfrom django.contrib.auth import authenticate, login, logout\nfrom django.contrib.auth.forms import AuthenticationForm\nfrom .forms import NewUserForm\ndef register_request(request):\nif request.method == \"POST\":\nform = NewUserForm(request.POST)\nif form.is_valid():\nuser = form.save()\nlogin(request, user)\nmessages.success(request, \"Registration successful.\" )\nreturn redirect(\"/\")\nmessages.error(request, \"Unsuccessful registration. Invalid information.\")\nform = NewUserForm()\nreturn render(request=request, template_name=\"register.html\", context={\"register_form\": form})\ndef login_request(request):\nif request.method == \"POST\":\nform = AuthenticationForm(request, data=request.POST)\nif form.is_valid():\nusername = form.cleaned_data.get('username')\npassword = form.cleaned_data.get('password')\nuser = authenticate(username=username, password=password)\nif user is not None:\nlogin(request, user)\nmessages.info(request, f\"You are now logged in as {username}.\")\nreturn redirect(\"/\")\nelse:\nmessages.error(request,\"Invalid username or password.\")\nelse:\nmessages.error(request,\"Invalid username or password.\")\nform = AuthenticationForm()\nreturn render(request=request, template_name=\"login.html\", context={\"login_form\": form})\ndef logout_request(request):\nlogout(request)\nmessages.info(request, \"You have successfully logged out.\")\nreturn redirect(\"/\")\n</code></pre> <pre><code>from django.shortcuts import render, redirect\nfrom hotel_app.models import Hotel, Room\nfrom django.views.generic.list import ListView\nfrom django.views.generic.detail import DetailView\nclass BookingListView(ListView):\nmodel = Booking\nqueryset = model.objects.all()\ndef get_queryset(self):\ntry:\nqueryset = self.queryset.filter(user=self.request.user)\nexcept ValueError:\nqueryset = self.model.objects.none()\nreturn queryset\nclass HotelRetrieveView(DetailView):\nmodel = Hotel\nclass HotelListView(ListView):\nmodel = Hotel\nclass RoomListView(ListView):\nmodel = Room\nqueryset = model.objects.all()\ndef get_queryset(self):\nhotel = self.kwargs['hotel_city']\nif hotel:\ntry:\nqueryset = self.queryset.filter(hotel__city=hotel)\nexcept ValueError:\nqueryset = self.model.objects.none()\nreturn queryset\nreturn self.queryset\n</code></pre> <pre><code>from django.shortcuts import render, redirect\nfrom hotel_app.models import Room, Booking\nfrom .forms import BookRoomForm\ndef booking_view(request, *args, **kwargs):\nmodel = Room\nqueryset = model.objects.all()\nhotel = kwargs['hotel_city']\nqueryset = queryset.filter(hotel__city=hotel)\nroom_type = kwargs['room_type']\nroom = queryset.get(type=room_type)\ncomm_model = Comment\ncomm_queryset = comm_model.objects.all()\ncomments = comm_queryset.filter(room=room)\nprint(room)\nif request.POST:\nform = BookRoomForm(request.POST, user=request.user, room=room)\nif form.is_valid():\nbooking = form.save()\nreturn redirect(\"/booking/\")\nform = BookRoomForm()\nreturn render(request=request, template_name=\"room_detail.html\", context={\"booking_form\": form,\n\"comments\": comments})\n</code></pre> <pre><code>from django.shortcuts import render, redirect\nfrom hotel_app.models import Room, Comment\nfrom .forms import ReviewForm\ndef leave_review(request, *args, **kwargs):\nmodel = Room\nqueryset = model.objects.all()\nhotel = kwargs['hotel_city']\nqueryset = queryset.filter(hotel__city=hotel)\nroom_type = kwargs['room_type']\nroom = queryset.get(type=room_type)\nif request.POST:\nform = ReviewForm(request.POST, user=request.user, room=room)\nif form.is_valid():\ncomment = form.save()\nreturn redirect(\"/booking/\")\nform = ReviewForm()\nreturn render(request=request, template_name=\"review.html\", context={\"review_form\": form})\n</code></pre>"},{"location":"lab3/auth/","title":"\u0410\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f","text":"<p>\u041d\u0430\u0441\u0442\u0440\u043e\u0438\u043c \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044e \u043f\u043e \u0442\u043e\u043a\u0435\u043d\u0430\u043c.</p> <pre><code> pip install -U djoser\n</code></pre> http://127.0.0.1:8000/auth/users/http://127.0.0.1:8000/auth/token/login\u041f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0442\u043e\u043a\u0435\u043d\u0430 <p></p> <p></p> <p></p>"},{"location":"lab3/description/","title":"\u0417\u0430\u0434\u0430\u043d\u0438\u0435","text":"<p>\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u043d\u0438\u044f.</p> <p></p> <p>\u041f\u043e\u043b\u0443\u0447\u0438\u0432\u0448\u0430\u044f\u0441\u044f \u0441\u0445\u0435\u043c\u0430 \u0431\u0430\u0437\u044b \u0434\u0430\u043d\u043d\u044b\u0445.</p> <p></p>"},{"location":"lab3/models/","title":"\u041c\u043e\u0434\u0435\u043b\u0438","text":"<p>\u041d\u0430\u043c \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043e\u043f\u0438\u0441\u0430\u0442\u044c \u0411\u0414 \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 Django ORM, \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e \u043f\u0435\u0440\u0435\u0439\u0434\u0451\u043c \u0432 \u0444\u0430\u0439\u043b <code>models.py</code> \u0432 \u043d\u0430\u0448\u0435\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 \u0438  \u0441\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043d\u0435\u0441\u043a\u043e\u043b\u044c\u043a\u043e \u043a\u043b\u0430\u0441\u0441\u043e\u0432, \u043d\u0430\u0441\u043b\u0435\u0434\u0443\u0435\u043c\u044b\u0445 \u043e\u0442 <code>django.db.models.Model</code>.</p> \u041c\u0443\u0437\u0435\u0439 \u0438 \u0410\u0432\u0442\u043e\u0440\u041f\u0440\u0435\u0434\u043c\u0435\u0442 \u0438 \u041a\u0430\u0440\u0442\u043e\u0442\u0435\u043a\u0430\u0424\u043e\u043d\u0434 \u0438 \u0412\u044b\u0441\u0442\u0430\u0432\u043a\u0430\u041f\u043e\u043c\u0435\u0449\u0435\u043d\u0438\u0435 \u0432 \u0424\u043e\u043d\u0434 \u0438 \u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043d\u0430 \u0412\u044b\u0441\u0442\u0430\u0432\u043a\u0443 <pre><code>\n</code></pre> <pre><code>\n</code></pre> <pre><code>\n</code></pre> <pre><code>\n</code></pre> <p>\u041f\u043e\u0441\u043b\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u0432\u0441\u0435\u0445 \u043c\u043e\u0434\u0435\u043b\u0435\u0439 \u043d\u0443\u0436\u043d\u043e \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u043c\u0438\u0433\u0440\u0430\u0446\u0438\u0438:</p> <pre><code>python manage.py makemigrations\npython manage.py migrate\n</code></pre> <p>\u0410 \u0442\u0430\u043a \u0436\u0435 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0441\u0443\u043f\u0435\u0440\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:</p> <pre><code>python manage.py createsuperuser\n</code></pre>"},{"location":"lab3/serializers/","title":"\u0421\u0435\u0440\u0438\u0430\u043b\u0430\u0439\u0437\u0435\u0440\u044b","text":"<p>\u0421\u0435\u0440\u0438\u0430\u043b\u0430\u0439\u0437\u0435\u0440\u044b \u043c\u043e\u0438 \u0441\u0435\u0440\u0438\u0430\u043b\u0430\u0439\u0437\u0435\u0440\u044b.</p> \u0421\u0435\u0440\u0438\u0430\u043b\u0430\u0439\u0437\u0435\u0440\u044b \u0434\u043b\u044f \u0432\u044b\u0432\u043e\u0434\u0430 \u0432\u0441\u0435\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439 \u0438\u0437 \u0442\u0430\u0431\u043b\u0438\u0446\u0421\u0435\u0440\u0438\u0430\u043b\u0430\u0439\u0437\u0435\u0440\u044b \u0434\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u043e\u0432\u044b\u0445 \u0437\u0430\u043f\u0438\u0441\u0435\u0439\u0421\u0435\u0440\u0438\u0430\u043b\u0430\u0439\u0437\u0435\u0440\u044b \u0434\u043b\u044f \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u0438\u0437 \u0437\u0430\u0434\u0430\u043d\u0438\u044f <pre><code>from rest_framework import serializers\nfrom .models import *\n</code></pre> <pre><code>from rest_framework import serializers\nfrom .models import *\n</code></pre>"},{"location":"lab3/task3-1/","title":"\u041f\u0440\u0430\u043a\u0442\u0438\u043a\u0430","text":"<p>\u0420\u0430\u0431\u043e\u0442\u0430 \u0441 \u0437\u0430\u043f\u0440\u043e\u0441\u0430\u043c\u0438 \u0432 Django ORM.</p> \u041c\u043e\u0434\u0435\u043b\u0438\u0417\u0430\u0434\u0430\u043d\u0438\u0435 1\u0417\u0430\u0434\u0430\u043d\u0438\u0435 2\u0417\u0430\u0434\u0430\u043d\u0438\u0435 3 <p><pre><code>from django.db import models\nclass CarOwner(models.Model):\nlast_name = models.CharField(max_length=30)\nfirst_name = models.CharField(max_length=30)\nbirth_date = models.DateField()\ndef __str__(self):\nreturn f'{self.first_name} {self.last_name}'\nclass Licence(models.Model):\nLICENSE_TYPE = (\n('B', 'passenger car'),\n('C', 'truck'),\n('D', 'bus'),\n)\ncar_owner = models.ForeignKey(CarOwner, on_delete=models.CASCADE, related_name=\"licence\")\nlicense_number = models.IntegerField()\ntype = models.CharField(max_length=2, choices=LICENSE_TYPE)\ndate_of_issue = models.DateField()\nclass Car(models.Model):\nlicense_plate_number = models.CharField(max_length=15)\nbrand = models.CharField(max_length=20)\nmodel = models.CharField(max_length=20)\ncolor = models.CharField(max_length=30)\nowner = models.ManyToManyField(CarOwner, through='Ownership')\ndef __str__(self):\nreturn self.license_plate_number\nclass Ownership(models.Model):\nuser = models.ForeignKey(CarOwner, on_delete=models.CASCADE, related_name=\"ownership\")\ncar = models.ForeignKey(Car, on_delete=models.CASCADE, related_name=\"ownership\")\ndate_start = models.DateField()\ndate_end = models.DateField(null=True, blank=True)\nended = models.BooleanField()\n</code></pre> </p> <pre><code>from django.utils import timezone\nfrom demsha_drf_app.models import CarOwner, Car, Ownership, Licence\nimport os\nimport django\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'demsha_drf_project.settings')\ndjango.setup()\nowners = CarOwner.objects.bulk_create(\n[\n(gleb := CarOwner(last_name=\"\u0411\u0435\u043b\u044f\u0435\u0432\", first_name=\"\u0413\u043b\u0435\u0431 \", birth_date=\"2000-03-11\")),\n(egor := CarOwner(last_name=\"\u041f\u043e\u043d\u043e\u043c\u0430\u0440\u0435\u0432\", first_name=\"\u0415\u0433\u043e\u0440\", birth_date=\"1998-08-01\")),\n(mariana := CarOwner(last_name=\"\u0421\u0438\u0434\u043e\u0440\u043e\u0432\u0430\", first_name=\"\u041c\u0430\u0440\u044c\u044f\u043d\u0430\", birth_date=\"1990-12-19\")),\n(ksenia := CarOwner(last_name=\"\u0413\u043e\u0440\u0434\u0435\u0435\u0432\u0430\", first_name=\"\u041a\u0441\u0435\u043d\u0438\u044f\", birth_date=\"1999-10-22\")),\n(kate1 := CarOwner(last_name=\"\u0421\u0438\u043d\u0438\u0446\u044b\u043d\u0430\", first_name=\"\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0430\", birth_date=\"1985-02-12\")),\n(fedor := CarOwner(last_name=\"\u0410\u0431\u0440\u0430\u043c\u043e\u0432\", first_name=\"\u0424\u0451\u0434\u043e\u0440\", birth_date=\"1977-04-30\")),\n(kate2 := CarOwner(last_name=\"\u041c\u0443\u0445\u0438\u043d\u0430\", first_name=\"\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0430\", birth_date=\"2002-08-02\")),\n]\n)\ncars = Car.objects.bulk_create(\n[\n(jeep := Car(license_plate_number=\"\u0425574\u0422\u041c\", brand=\"Jeep\", model=\"Compass\", color=\"black\")),\n(honda := Car(license_plate_number=\"\u0423342\u0423\u0420\", brand=\"Honda\", model=\"Clarity\", color=\"gray\")),\n(ford1 := Car(license_plate_number=\"\u0421699\u041d\u041e\", brand=\"Ford\", model=\"Fusion\", color=\"red\")),\n(kia := Car(license_plate_number=\"\u0423253\u041a\u041c\", brand=\"Kia\", model=\"Rio\", color=\"white\")),\n(vw := Car(license_plate_number=\"\u0422191\u0412\u0425\", brand=\"Volkswagen\", model=\"Atlas\", color=\"gold\")),\n(tesla := Car(license_plate_number=\"\u041d882\u0420\u0410\", brand=\"Tesla\", model=\"Model 3\", color=\"blue\")),\n(ford2 := Car(license_plate_number=\"E543MK\", brand=\"Ford\", model=\"Maverick\", color=\"red\")),\n]\n)\nownerships = Ownership.objects.bulk_create(\nOwnership(user=gleb, car=ford1, date_start=\"2019-10-25\", date_end=\"2021-11-15\"),\nOwnership(user=egor, car=tesla, date_start=\"2018-11-15\", date_end=\"2022-06-06\"),\nOwnership(user=egor, car=honda, date_start=\"2022-07-07\"),\nOwnership(user=mariana, car=tesla, date_start=\"2017-12-03\", date_end=\"2018-11-14\"),\nOwnership(user=mariana, car=honda, date_start=\"2018-11-19\", date_end=\"2022-07-05\"),\nOwnership(user=mariana, car=kia, date_start=\"2022-05-13\"),\nOwnership(user=ksenia, car=jeep, date_start=\"2020-03-14\"),\nOwnership(user=kate2, car=honda, date_start=\" 2017-08-11\", date_end=\"2020-12-23\"),\nOwnership(user=kate2, car=ford1, date_start=\"2021-11-15\"),\nOwnership(user=fedor, car=ford1, date_start=\"2018-01-29\", date_end=\"2019-10-20\"),\nOwnership(user=fedor, car=vw, date_start=\" 2020-12-25\"),\nOwnership(user=fedor, car=tesla, date_start=\"2022-06-07\"),\nOwnership(user=kate2, car=ford2, date_start=\"2023-06-16\"),\n)\nlicences = Licence.objects.bulk_create(\n[Licence(owner=owners[i], licence_number=str(i + 1) * 10, type=\"B\", date_of_issue=timezone.now()) for i in range(7)]\n)\n</code></pre> <pre><code>from django.utils import timezone\nfrom demsha_drf_app.models import CarOwner, Car, Licence\nimport os\nimport django\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'demsha_drf_project.settings')\ndjango.setup()\nfords = Car.objects.filter(brand=\"Ford\").all()\nkates = CarOwner.objects.filter(first_name=\"\u0415\u043a\u0430\u0442\u0435\u0440\u0438\u043d\u0430\").all()\nrandom_id = CarOwner.objects.order_by(\"?\").values(\"id\").first()\nrandom_licence = Licence.objects.get(owner_id=random_id)\nred_car_owners = CarOwner.objects.filter(ownership__car__color=\"red\").all()\nthis_year_owners = CarOwner.objects.filter(licence__date_of_issue__year=timezone.now().year).all()\n</code></pre> <pre><code>from django.db.models import Min, Max, Count\nfrom demsha_drf_app.models import CarOwner, Car, Ownership, Licence\nimport os\nimport django\nos.environ.setdefault('DJANGO_SETTINGS_MODULE', 'demsha_drf_project.settings')\ndjango.setup()\nold_licence = Licence.objects.aggregate(max_issue_date=Min(\"date_of_issue\"))[\"max_issue_date\"]\nnew_ownership = Ownership.objects.aggregate(max_start_date=Max(\"start_date\"))[\"max_start_date\"]\nownership_count = CarOwner.objects.annotate(count=Count(\"ownership\"))\ncars_brands_count = Car.objects.values(\"brand\").annotate(count=Count(\"id\"))\nowners_sort = CarOwner.objects.order_by(\"ownership__start_date\").all()\n</code></pre>"},{"location":"lab3/urls/","title":"\u041c\u0430\u0440\u0448\u0440\u0443\u0442\u044b","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043c\u0430\u0440\u0448\u0440\u0443\u0442\u0438\u0437\u0430\u0446\u0438\u044e \u0434\u043b\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430. \u0412 \u0444\u0430\u0439\u043b\u0435 urls.py \u0432 \u043e\u0434\u043d\u043e\u0438\u043c\u0435\u043d\u043d\u043e\u0439 \u0441 \u043f\u0440\u043e\u0435\u043a\u0442\u043e\u043c \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 museum \u0431\u0443\u0434\u0443\u0442 \u043f\u0440\u043e\u043f\u0438\u0441\u0430\u043d\u044b \u043f\u0443\u0442\u0438 \u043a  \u0430\u0434\u043c\u0438\u043d\u043a\u0435, \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438, \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e \u0438 swagger-\u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 \u043a \u0435\u0433\u043e api. \u0412 \u0444\u0430\u0439\u043b\u0435 urls.py \u0432 \u0434\u0438\u0440\u0435\u043a\u0442\u043e\u0440\u0438\u0438 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f  \u0443\u043a\u0430\u0436\u0435\u043c \u043f\u0443\u0442\u0438 \u043a \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0430\u043c, \u0433\u0434\u0435 \u0431\u0443\u0434\u0443\u0442 \u0440\u0435\u043d\u0434\u0435\u0440\u0438\u0442\u044c\u0441\u044f \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f.</p> museum/urls.pymuseum_app/urls.py <pre><code>from django.db import models\n</code></pre> <p>admin/ - \u0430\u0434\u043c\u0438\u043d\u043a\u0430  api-auth/ - \u043f\u0435\u0440\u0432\u0430\u044f \u0447\u0430\u0441\u0442\u044c url \u0434\u043b\u044f \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438  api/ - \u043f\u0435\u0440\u0432\u0430\u044f \u0447\u0430\u0441\u0442\u044c url \u043a \u043b\u044e\u0431\u043e\u043c\u0443 \u043f\u0443\u0442\u0438 \u0432 \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438 museum_app  auth/ - \u043f\u0435\u0440\u0432\u0430\u044f \u0447\u0430\u0441\u0442\u044c url \u0434\u043b\u044f \u0430\u0443\u0442\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u043f\u043e \u0442\u043e\u043a\u0435\u043d\u0430\u043c \u0441\u0440\u0435\u0434\u0441\u0442\u0432\u0430\u043c\u0438 djoser  doc/swagger/ - \u043f\u0443\u0442\u044c \u043a swagger \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438  doc/redoc - \u043f\u0443\u0442\u044c \u043a swagger \u0434\u043e\u043a\u0443\u043c\u0435\u043d\u0442\u0430\u0446\u0438\u0438 </p> <pre><code>\n</code></pre> <p>foundations/list - \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u0444\u043e\u043d\u0434\u043e\u0432  card/list - \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u0430\u0440\u0442\u043e\u0442\u0435\u043a  card/create/ - \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0442\u0435\u043a\u0443  item/list - \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432  item/create/ - \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0435\u0434\u043c\u0435\u0442  foundations/exhibitions/ - \u0443\u0437\u043d\u0430\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0432\u044b\u0441\u0442\u0430\u0432\u043e\u043a, \u0432 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u0443\u0447\u0430\u0441\u0442\u0432\u043e\u0432\u0430\u043b\u0438 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u044b \u043a\u0430\u0436\u0434\u043e\u0433\u043e \u0444\u043e\u043d\u0434\u0430  card/items/ - \u0443\u0437\u043d\u0430\u0442\u044c \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u043e\u0432 \u0432 \u043a\u0430\u0436\u0434\u043e\u0439 \u043a\u0430\u0440\u0442\u043e\u0442\u0435\u043a\u0435  foundations/ratio/ - \u0443\u0437\u043d\u0430\u0442\u044c \u043f\u0440\u043e\u0446\u0435\u043d\u0442\u043d\u043e\u0435 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u0435 \u043e\u0431\u044a\u0435\u043c\u043e\u0432 \u0444\u043e\u043d\u0434\u043e\u0432  item/exhibitions/ - \u0434\u043b\u044f \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u0430 \u0432\u044b\u0432\u0435\u0441\u0442\u0438 \u043f\u0440\u0435\u0434\u043c\u0435\u0442\u044b, \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u0443\u0447\u0430\u0441\u0442\u0432\u043e\u0432\u0430\u043b\u0438 \u0441 \u043d\u0438\u043c \u0432 \u043e\u0434\u043d\u0438\u0445 \u0432\u044b\u0441\u0442\u0430\u0432\u043a\u0430\u0445"},{"location":"lab3/views/","title":"\u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f","text":"<p>\u0421\u043e\u0437\u0434\u0430\u0434\u0438\u043c \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f \u043d\u0430 \u043e\u0441\u043d\u043e\u0432\u0435 \u0441\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u044b\u0445 Generic \u043a\u043b\u0430\u0441\u0441\u043e\u0432.</p> \u041f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u044b\u0435 \u0434\u043b\u044f \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0438 \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432, \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0445 \u0432\u043e \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0435\u041e\u0441\u0442\u0430\u043b\u044c\u043d\u044b\u0435 \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u043b\u0435\u043d\u0438\u044f, \u0434\u043b\u044f \u0432\u044b\u0432\u043e\u0434\u0430 \u0432 \u0432\u0438\u0434\u0435 \u0441\u043f\u0438\u0441\u043a\u0430, \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0432\u044b\u0432\u043e\u0434\u0430 \u0438 \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043e\u0431\u044a\u0435\u043a\u0442\u043e\u0432 <pre><code>from rest_framework import generics\nfrom .serializers import *\nfrom .models import *\nfrom django.db.models import Count, F\n</code></pre> <pre><code>from rest_framework import generics\nfrom .serializers import *\nfrom .models import *\n</code></pre>"}]}